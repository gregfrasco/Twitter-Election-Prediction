/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Views;

import Data.Classifier;
import Data.Politicain;
import Data.PoliticalGraph;
import Data.PoliticianGraph;
import Data.Politicians;
import Data.SentimentGraph;
import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.text.DecimalFormat;

/**
 *
 * @author frascog
 */
public class MainView extends javax.swing.JPanel implements Runnable{

    private Politicians politicians;
    private Classifier classifier;
    
    public MainView() {
        initComponents();
        initMyComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jTabbedPane1 = new javax.swing.JTabbedPane();
        jPanelCanidents = new javax.swing.JPanel();
        jPanelTweets = new javax.swing.JPanel();
        jPanel1 = new javax.swing.JPanel();
        jPanel2 = new javax.swing.JPanel();
        jPanelClass = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        jLabel10 = new javax.swing.JLabel();

        javax.swing.GroupLayout jPanelCanidentsLayout = new javax.swing.GroupLayout(jPanelCanidents);
        jPanelCanidents.setLayout(jPanelCanidentsLayout);
        jPanelCanidentsLayout.setHorizontalGroup(
            jPanelCanidentsLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 1000, Short.MAX_VALUE)
        );
        jPanelCanidentsLayout.setVerticalGroup(
            jPanelCanidentsLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 518, Short.MAX_VALUE)
        );

        jTabbedPane1.addTab("Canidents", jPanelCanidents);

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 988, Short.MAX_VALUE)
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 316, Short.MAX_VALUE)
        );

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 0, Short.MAX_VALUE)
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 184, Short.MAX_VALUE)
        );

        javax.swing.GroupLayout jPanelTweetsLayout = new javax.swing.GroupLayout(jPanelTweets);
        jPanelTweets.setLayout(jPanelTweetsLayout);
        jPanelTweetsLayout.setHorizontalGroup(
            jPanelTweetsLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelTweetsLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanelTweetsLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        jPanelTweetsLayout.setVerticalGroup(
            jPanelTweetsLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelTweetsLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        jTabbedPane1.addTab("Tweets", jPanelTweets);

        jLabel1.setText("Political Classification:");

        jLabel2.setText("Resubstitution Error:");

        jLabel3.setText("Loading...");

        jLabel4.setText("10 cross fold validation:");

        jLabel5.setText("Loading...");

        jLabel6.setText("Sentiment Classification:");

        jLabel7.setText("Resubitution Error:");

        jLabel8.setText("10 cross fold validation:");

        jLabel9.setText("Loading...");

        jLabel10.setText("Loading...");

        javax.swing.GroupLayout jPanelClassLayout = new javax.swing.GroupLayout(jPanelClass);
        jPanelClass.setLayout(jPanelClassLayout);
        jPanelClassLayout.setHorizontalGroup(
            jPanelClassLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelClassLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanelClassLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel6)
                    .addGroup(jPanelClassLayout.createSequentialGroup()
                        .addGroup(jPanelClassLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel1)
                            .addGroup(jPanelClassLayout.createSequentialGroup()
                                .addGap(6, 6, 6)
                                .addGroup(jPanelClassLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel2)
                                    .addComponent(jLabel4)
                                    .addComponent(jLabel7)))
                            .addComponent(jLabel8, javax.swing.GroupLayout.Alignment.TRAILING))
                        .addGroup(jPanelClassLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanelClassLayout.createSequentialGroup()
                                .addGap(14, 14, 14)
                                .addGroup(jPanelClassLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel9)
                                    .addComponent(jLabel3)
                                    .addComponent(jLabel5)))
                            .addGroup(jPanelClassLayout.createSequentialGroup()
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(jLabel10)))))
                .addContainerGap(759, Short.MAX_VALUE))
        );
        jPanelClassLayout.setVerticalGroup(
            jPanelClassLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelClassLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanelClassLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(jLabel3))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanelClassLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel4)
                    .addComponent(jLabel5))
                .addGap(18, 18, 18)
                .addComponent(jLabel6)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanelClassLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel7)
                    .addComponent(jLabel9))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanelClassLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel8)
                    .addComponent(jLabel10))
                .addContainerGap(374, Short.MAX_VALUE))
        );

        jTabbedPane1.addTab("Classification", jPanelClass);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jTabbedPane1)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jTabbedPane1)
        );
    }// </editor-fold>//GEN-END:initComponents


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanelCanidents;
    private javax.swing.JPanel jPanelClass;
    private javax.swing.JPanel jPanelTweets;
    private javax.swing.JTabbedPane jTabbedPane1;
    // End of variables declaration//GEN-END:variables

    private void initMyComponents() {
        this.jPanelCanidents.setLayout(new GridLayout(0, 5, 0, 5));
        this.classifier = Classifier.getInstance();
        this.classifier.classify();
        this.politicians = classifier.getPoliticains();
        for (Politicain pol : politicians.getPoliticains()) {
           this.jPanelCanidents.add(pol.getView());
        }
        Thread sent = new Thread(classifier.getBayesSentiment());
        sent.start();
        
        Thread poil = new Thread(classifier.getBayesPolicitcal());
        poil.start();
        
        Thread update = new Thread(this);
        update.start();
        
        jPanel1.setLayout(new GridLayout(1,2,1,2));
        SentimentGraph sentimentGraph = new SentimentGraph();
        jPanel1.add(sentimentGraph.getGraph());
        PoliticalGraph politicalGraph = new PoliticalGraph();
        jPanel1.add(politicalGraph.getGraph());
        jPanel2.setLayout(new BorderLayout());
        PoliticianGraph politicianGraph = new PoliticianGraph();
        jPanel2.add(politicianGraph.getGraph());
    }

    @Override
    public void run() {
        boolean done1 = false;
        boolean done2 = false;
        while(!done1 || !done2){
            if(this.classifier.getBayesPolicitcal().getTenCrossFold() > 0){
                double resub = this.classifier.getBayesPolicitcal().getResubstitutionError();
                DecimalFormat df = new DecimalFormat("#.####");
                this.jLabel3.setText(df.format(resub)+ "%");
                double tenCross = this.classifier.getBayesPolicitcal().getTenCrossFold();
                this.jLabel5.setText(df.format(tenCross) + "%");
                done1 = true;
            }
            if(this.classifier.getBayesSentiment().getTenCrossFold() > 0){
                this.jLabel9.setText(this.classifier.getBayesSentiment().getResubstitutionError()+ "%");
                this.jLabel10.setText(this.classifier.getBayesSentiment().getTenCrossFold() + "%");
                done2 = true;
            }
        }
    }
}
